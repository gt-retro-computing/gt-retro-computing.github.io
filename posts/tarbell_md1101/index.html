<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta itemprop="name" content="Tarbell MD1101 SSSD Floppy Controller">
<meta itemprop="description" content="MD1101 Our machine came with a Tarbell MD1101 Single Side Single Density (SSSD) floppy drive controller along with 2 8&quot; floppy drives.
 The Tarbell Floppy Disk Interface was a programmed-data-transfer (not DMA) device utilizing Port I/O, similar for example to the SD Systems Versafloppy boards. It was designed to work with a variety of standard-size floppy disk drives. It includes a 32-byte ROM bootstrap program, which was automatically enabled when the computer RESET button was pushed, and which switched itself out after the bootstrap had run."><meta itemprop="datePublished" content="2019-11-27T00:00:00-04:00" />
<meta itemprop="dateModified" content="2019-11-27T00:00:00-04:00" />
<meta itemprop="wordCount" content="547">
<meta itemprop="keywords" content="Hardware,Floppy," /><meta property="og:title" content="Tarbell MD1101 SSSD Floppy Controller" />
<meta property="og:description" content="MD1101 Our machine came with a Tarbell MD1101 Single Side Single Density (SSSD) floppy drive controller along with 2 8&quot; floppy drives.
 The Tarbell Floppy Disk Interface was a programmed-data-transfer (not DMA) device utilizing Port I/O, similar for example to the SD Systems Versafloppy boards. It was designed to work with a variety of standard-size floppy disk drives. It includes a 32-byte ROM bootstrap program, which was automatically enabled when the computer RESET button was pushed, and which switched itself out after the bootstrap had run." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/tarbell_md1101/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-27T00:00:00-04:00" />
<meta property="article:modified_time" content="2019-11-27T00:00:00-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tarbell MD1101 SSSD Floppy Controller"/>
<meta name="twitter:description" content="MD1101 Our machine came with a Tarbell MD1101 Single Side Single Density (SSSD) floppy drive controller along with 2 8&quot; floppy drives.
 The Tarbell Floppy Disk Interface was a programmed-data-transfer (not DMA) device utilizing Port I/O, similar for example to the SD Systems Versafloppy boards. It was designed to work with a variety of standard-size floppy disk drives. It includes a 32-byte ROM bootstrap program, which was automatically enabled when the computer RESET button was pushed, and which switched itself out after the bootstrap had run."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Tarbell MD1101 SSSD Floppy Controller</title>
	
	<link rel="stylesheet" href="/css/style.min.c693329ce3bac2503f88115a4011a284a06d53e30f484562a37664dc4c5f0a74.css" integrity="sha256-xpMynOO6wlA/iBFaQBGihKBtU+MPSEVio3Zk3ExfCnQ=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="/">The IMSAI Gang</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="/posts/">Posts</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://github.com/gt-retro-computing" target="_blank" rel="noopener" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="/posts/">Posts</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Nov 27, 2019</span></div>
				<h1>Tarbell MD1101 SSSD Floppy Controller</h1>
			</header>
			<div class="content">
				<h1 id="md1101">MD1101<a href="#md1101" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>Our machine came with a Tarbell MD1101 Single Side Single Density (SSSD) floppy drive controller along with 2 8&quot; floppy drives.</p>
<blockquote>
<p>The Tarbell Floppy Disk Interface was a programmed-data-transfer (not DMA) device utilizing Port I/O, similar for example to the SD Systems Versafloppy boards. It was designed to work with a variety of standard-size floppy disk drives. It includes a 32-byte ROM bootstrap program, which was automatically enabled when the computer RESET button was pushed, and which switched itself out after the bootstrap had run. In this way, no part of the computer 64K of memory needed to be dedicated to Read-Only-Memory (ROM). <br>
The interface ran at the standard speed of 250,000 bits per second, and the normal formatted capacity per diskette of 256 kilobytes. Places for two connectors were provided on the board.</p>
</blockquote>
<h1 id="documentation-typo">Documentation Typo<a href="#documentation-typo" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>The WD1771 chip used by the card actually does not support multi-drive configuration. The card used a 74LS175 Quad D Flip-Flop to select between up to four drives. Drive select only use 2 of the 4 bits in the flip-flop, the other 2 seems to be releatively undocumented. However, the provided sample code for selecting drive would not work. It would cause any subsquent input from the controller to hang the CPU. (Stuck in <code>IN DWAIT</code>)</p>
<p>After a lot of trail and error along with reading the tiny text schematics, we are able to narrow the problem downto that the code is incorrectly setting one of the bit on the Flip Flop. Effectively disabling the controller interrupt request handling thus causing it to hang forever.</p>
<h2 id="modified-code-listing">Modified Code Listing<a href="#modified-code-listing" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">SELECT_DIRVE:</span>
</span></span><span class="line"><span class="cl"><span class="c">;Select drive in register C
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nf">MOV</span> <span class="no">A</span><span class="p">,</span> <span class="no">C</span> <span class="c">; Move drive number to A
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="no">CMA</span>
</span></span><span class="line"><span class="cl"><span class="nf">ANI</span> <span class="mi">3</span> <span class="c">;Limit drive selection to only 0-3
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="no">RAL</span><span class="p">!</span> <span class="no">RAL</span><span class="p">!</span> <span class="no">RAL</span><span class="p">!</span> <span class="no">RAL</span> <span class="c">;shift left by 4
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="no">ORI</span> <span class="mi">0x82</span> <span class="c">;MODIFIED: original is 0x2
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="no">OUT</span> <span class="no">DEXT</span>
</span></span><span class="line"><span class="cl"><span class="nf">RET</span> <span class="c">;return from subroutine
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="p">---</span>
</span></span></code></pre></div><h1 id="525-drive-mod">5.25&quot; Drive Mod<a href="#525-drive-mod" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>In addition to the 8&quot; drives, we also happen to have a few 5.25&quot; 
drive on hand. that we would like to operate as well. Upon close inspection, the 5.25&quot; and 8&quot; (Shugart 801) interface are not very different from eachother. The only difference being the 5.25&quot; drives has a Motor Enable line in lieu of a Head Load (This is due the the difference in physical construction of the drive.) But I think it is okay to subsitute the signal. Since if achieve the same effect which is to <em>begin</em> reading the diskett. Conviently the board has a free 40 pin mounting hole for a additional 2 8&quot; drive. We decided to use this connector for our 5.25&quot; drive header. This required a lot of jumper wires (All the blue mod wires below).</p>
<h2 id="drive-pin-mapping">Drive Pin Mapping<a href="#drive-pin-mapping" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>The pads are labeled across the MD1101 board and are listed with their corresponding name here. 
They must be wired to the corresponding &ldquo;Mapped To&rdquo; pins on the 5.25&quot; floppy drive.</p>
<table>
<thead>
<tr>
<th>Pad</th>
<th>Name</th>
<th>Mapped To</th>
</tr>
</thead>
<tbody>
<tr>
<td>E23</td>
<td>DS0*</td>
<td>16 (motor en. B)</td>
</tr>
<tr>
<td>R3</td>
<td>INDX0*</td>
<td>8 (index)</td>
</tr>
<tr>
<td>R1</td>
<td>RDY0*</td>
<td>34 (ready)</td>
</tr>
<tr>
<td>E19</td>
<td>HLD0*</td>
<td></td>
</tr>
<tr>
<td>E20</td>
<td>HLD1*</td>
<td></td>
</tr>
<tr>
<td>E17</td>
<td>HLD2*</td>
<td>12 (drive sel. B)</td>
</tr>
<tr>
<td>E25</td>
<td>HLD3*</td>
<td></td>
</tr>
<tr>
<td>E22</td>
<td>SO*</td>
<td>18 (direction)</td>
</tr>
<tr>
<td>E21</td>
<td>SI*</td>
<td>20 (step)</td>
</tr>
<tr>
<td>E15</td>
<td>WD*</td>
<td>22</td>
</tr>
<tr>
<td>E16</td>
<td>WG*</td>
<td>24</td>
</tr>
<tr>
<td>R7</td>
<td>TR00*</td>
<td>26 (sense track zero)</td>
</tr>
<tr>
<td>R5</td>
<td>WRPT0*</td>
<td>28</td>
</tr>
<tr>
<td>R11</td>
<td>RDAT0*</td>
<td>30</td>
</tr>
</tbody>
</table>
<h2 id="pictures">Pictures<a href="#pictures" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p><img src="/image/post/md1101/board_mod.jpeg" alt="MD 1101 board after 5.25&quot; mod"></p>
<center>MD 1101 board after 5.25" mod</center>
<p><img src="/image/post/md1101/setup.jpeg" alt="Overall Machine Setup"></p>
<center>Overall Machine Setup</center>
			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>Author: Codetector, Will Gulian</p>
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="/tags/hardware">Hardware</a></span><span class="tag"><a href="/tags/floppy">Floppy</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>547 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2019-11-27</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="/posts/llvm_assembler/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>LLVM For Dummies: (1)Intro &amp; Assembler</span>
			</a>
			<a class="prev-post" href="/posts/cpm-boot-up/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>CP/M 2.2 from scratch</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2022 <a href="/">the IMSAI Gang</a></p>
		<p><a href="/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="/js/main.min.17d74807d860815985fea50c0164a0c132f23813ff704cf899739c92249d91e1.js" integrity="sha256-F9dIB9hggVmF/qUMAWSgwTLyOBP/cEz4mXOckiSdkeE="></script>

</body>

</html>
